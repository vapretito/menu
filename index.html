<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maestro Lee</title>
  <meta name="description" content="Maestro Lee" />
  
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700&display=swap" rel="stylesheet">

  <link rel="icon" href="img/maestro-lee-logo.png" type="image/png" />
  <style>
    :root{
  --paper:#000000;            /* papel de arroz claro */
  --ink:#1a1b1e;              /* tinta/charcoal */
  --brand:#b10606;            /* dejamos un ‚Äúbrand‚Äù oscuro */
  --brand-dark:#17181b;
  --gold:#d6b86a;             /* dorado m√°s suave */
  --text:#000000;
  --muted:#6b7280;
  --border:#e9dfb2;
  --shadow:0 10px 30px rgba(0,0,0,.15);
  --radius:14px;
}

  
    /* ===== Base ===== */
    *{box-sizing:border-box}
    html,body{
  margin:0;
  font-family:"Noto Serif SC","Microsoft YaHei","PingFang SC",serif;
  background: var(--paper);
  color:var(--text);
  overflow-x: hidden;

}


    a, a:visited{color:inherit}
  
    /* ===== Header + Marca ===== */
    header{
  position: relative;
  color: var(--gold);
  text-align: center;
  padding: 80px 16px;
  border-bottom: 4px solid var(--gold);
  box-shadow: 0 10px 25px rgba(0,0,0,.42);

  /* FOTO + PATR√ìN "SEIGAIHA" + DEGRADADO */
  background:
  url('img/banner-chino.jpg') center/cover no-repeat,
  url('img/pat-seigaiha.svg') repeat,
  linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.45));
background-blend-mode: multiply, normal, normal;

}

/* aseguremos que el texto quede por encima */
header > * { position: relative; z-index: 1; }

header::after{
  content:'';
  position:absolute;
  inset:0;
  background: #b22b30be
}

.brand-row{
  position:relative;
  z-index:1;
  max-width:1100px;
  margin:0 auto;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:22px;
}
.logo-xl{
  width:140px;
  height:auto;
  background:#fff;
  border-radius:50%;
  border:3px solid var(--gold);
  box-shadow:0 4px 20px rgba(0,0,0,.3);
  padding:8px;
}
.brand-text h1{
  font-family:"Noto Serif SC", serif;
  font-weight:700;
  font-size:clamp(2rem, 6vw, 3.5rem);
  margin:0;
  color:var(--gold);
  letter-spacing:2px;
  text-shadow:0 3px 8px rgba(0,0,0,0.6);
}
#tagline{
  margin-top:6px;
  font-style:italic;
  font-size:1.2rem;
  color:rgba(243, 227, 7, 0.459);
  text-shadow:0 1px 4px rgba(0,0,0,0.7);
}

    /* ===== Navbar ===== */
/* ===== Navbar ===== */
/* estado normal, cuando est√° m√°s abajo */
nav.top {
  position: relative;            /* ya no sticky */
  z-index: 120;
  background: rgba(39, 5, 11, 0.96);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(214,184,106,.25);
}

/* estado fijo cuando lo alcanz√°s */
nav.top.is-fixed {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;            /* ocupa todo el ancho */
  z-index: 200;        /* por encima del contenido */
}

/* para que el contenido no se suba cuando el nav se vuelve fixed */
body.has-fixed-nav {
  padding-top: 70px;   /* ajust√° a la altura real del nav */
}



.top .wrap{
  max-width:1100px; margin:auto;
  padding:12px 16px; display:flex; gap:14px; align-items:center; justify-content:space-between;
}
.top .brand-mini{color:#fff}
.top .brand-mini img{width:32px; height:32px; border-radius:50%; border:1px solid var(--gold)}
.top .brand-mini strong{color:var(--gold)}
.top .lang-pill .lang{background:transparent; border-color:var(--gold); color:#fff}
.top .lang-pill .lang.active{background:var(--gold); color:#111827}

/* al scrollear: fondo s√≥lido tipo sitio de referencia */
.top.scrolled{
  background: #0c0d11;
  box-shadow: 0 6px 22px rgba(0,0,0,.28);
  border-bottom: 3px solid var(--gold);
}

  
    /* ===== Main ===== */
    main{max-width:1100px; margin:auto; padding:24px 16px 120px}
    h2.section-title{color:var(--brand); border-bottom:3px solid var(--gold); display:inline-block; padding-bottom:6px; margin:10px 0 18px}
  
    /* ===== Categor√≠as ===== */
    .cats{display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 18px}
    .cat-btn{padding:8px 12px; border:2px solid var(--gold); background:var(--panel); border-radius:999px; cursor:pointer; font-weight:600; transition:.15s}
    .cat-btn:hover{transform:translateY(-1px)}
    .cat-btn.active{background:var(--brand); color:var(--gold); border-color:var(--brand-dark)}
  
    /* ===== Grid de platos ===== */
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:18px}
    .card{background:var(--panel); border:2px solid var(--gold); border-radius:var(--radius); overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column}
    .card img{width:100%; height:160px; object-fit:cover; border-bottom:2px solid var(--gold)}
    .card .info{padding:12px}
    .card h3{margin:0 0 6px; color:var(--brand)}
    .card p{margin:0; color:var(--muted)}
    .card .row{display:flex; align-items:center; justify-content:space-between; margin-top:10px}
    .price{font-weight:700; font-size:1.05rem; color:#111}
    .add{padding:8px 10px; border:none; cursor:pointer; border-radius:10px; font-weight:700; color:var(--gold); background:var(--brand)}
    .add:hover{filter:brightness(.95)}
  
    /* ===== FAB Carrito ===== */
    .fab{
  position: fixed !important;
  right: max(16px, env(safe-area-inset-right) + 12px) !important;
  bottom: max(16px, env(safe-area-inset-bottom) + 12px) !important;
  left: auto !important;              /* anula cualquier 'left' heredado */
  top: auto !important;
  z-index: 1000;                      /* por encima de cards/drawer fondo */
  width: 56px; height: 56px;
  border-radius: 9999px;
  display:flex; align-items:center; justify-content:center;
  background:var(--brand); color:var(--gold); border:3px solid var(--gold);  height:64px;  font-size:20px; box-shadow:var(--shadow); 
}
    .fab .badge{
      position:absolute; top:-6px; right:-6px;
      background:#111827; color:#fff; border:2px solid var(--gold);
      width:26px; height:26px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-weight:800; font-size:.9rem;
    }
    /* ocultar FAB cuando el drawer est√° abierto (opcional) */
    .drawer.open ~ .fab{ opacity:0; transform:translateY(8px); pointer-events:none; transition:opacity .18s ease, transform .18s ease; }
  
    /* ===== Drawer Carrito ===== */
    .drawer{ position:fixed; inset:0; pointer-events:none; z-index:2000; }
    .drawer.open{ pointer-events:auto; }
    .drawer .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.45); opacity:0; transition:.2s; z-index:0; }
    .drawer.open .backdrop{ opacity:1; }
    .panel{
      position:absolute; right:0; top:0; bottom:0; width:100%; max-width:410px;
      background:#111827; color:#f3f4f6; transform:translateX(100%); transition:.25s;
      border-left:4px solid var(--gold); display:flex; flex-direction:column; z-index:1;
    }
    .drawer.open .panel{ transform:translateX(0); }
    .panel header{background:#111827; border-bottom:2px solid #374151; color:#f3f4f6; padding:14px 16px; display:flex; align-items:center; justify-content:space-between}
    .panel h3{margin:0; font-size:1.2rem}
    .close{background:#374151; border:none; color:#e5e7eb; padding:6px 10px; border-radius:8px; cursor:pointer}
    .items{flex:1; overflow:auto; padding:12px 12px 0}
    .ci{display:grid; grid-template-columns: 1fr auto; gap:8px; padding:10px; border:1px dashed #374151; border-radius:12px; margin-bottom:8px; background:#0b1220}
    .ci h4{margin:0 0 4px}
    .qty{display:flex; align-items:center; gap:8px}
    .qty button{width:28px; height:28px; border:none; border-radius:6px; background:#374151; color:#fff; cursor:pointer}
    .sum{padding:12px; border-top:2px solid #374151; background:#0b1220}
    .sum .row{display:flex; justify-content:space-between; margin:6px 0}
    .checkout{display:flex; flex-direction:column; gap:8px; padding:12px}
    .checkout button{padding:12px; font-weight:800; border-radius:12px; border:2px solid var(--gold); cursor:pointer}
    .btn-wa{background:#25D366; color:#0b2e13}
    .btn-clear{background:#374151; color:#e5e7eb; border-color:#374151}
  
    /* ===== Footer ===== */
    footer{background:var(--brand-dark); color:var(--gold); text-align:center; padding:20px; border-top:4px solid var(--gold)}
  
    /* ===== Microinteracciones ===== */
    .btn-anim{ position:relative; transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease; will-change: transform; }
    .btn-anim:hover{ transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,.18); }
    .btn-anim:active{ transform: translateY(0) scale(.98); }
    .btn-glow:hover{ box-shadow: 0 0 0 6px color-mix(in oklab,var(--gold), transparent 82%); }
    @keyframes pulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.04)} }
    .btn-pulse{ animation: pulse 2.2s ease-in-out infinite; }
    .card-anim{ transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease; }
    .card-anim:hover{ transform: translateY(-6px); box-shadow: 0 16px 40px rgba(0,0,0,.22); border-color: var(--gold); }
    .pill-anim{ position:relative; overflow:hidden; }
    .pill-anim::after{ content:''; position:absolute; left:8%; right:8%; bottom:4px; height:2px; background:var(--brand); transform:scaleX(0); transform-origin:left; transition:transform .25s ease; }
    .pill-anim:hover::after, .pill-anim[aria-current="true"]::after{ transform:scaleX(1); }
    .reveal{ opacity:0; transform:translateY(12px); transition:opacity .5s ease, transform .5s ease; }
    .reveal.is-in{ opacity:1; transform:translateY(0); }
    .top.scrolled{ box-shadow: 0 6px 22px rgba(0,0,0,.28); }
    .ripple-wrap{ position:relative; overflow:hidden; }
    .ripple{ position:absolute; border-radius:50%; transform:scale(0); background: color-mix(in oklab, var(--gold), white 25%); opacity:.45; animation:ripple .55s ease-out forwards; }
    @keyframes ripple{ to{ transform:scale(12); opacity:0; } }


    .fab{ overflow: visible; }
/* ===== Hero / Banner ===== */
/* ===== Hero full-screen m√≥vil (din√°mico) ===== */
/* Fallback para navegadores viejos */
header.hero{
  min-height: 100vh;
  display: grid;
  place-items: center;
  padding: 0;                      /* lo controlamos en .hero-content */
}

/* iOS/Android modernos: usa viewport din√°mico (dvh) que descuenta la barra del navegador */
@supports (height: 100dvh){
  header.hero{
    min-height: 100dvh;           /* ocupa casi toda la pantalla visible */
  }
}

/* Contenido centrado y con safe-area */
header.hero .hero-content{
  width: min(92vw, 900px);
  margin: 0 auto;
  padding-block: clamp(32px, 6vh, 96px);
  padding-top: calc(clamp(32px, 6vh, 96px) + env(safe-area-inset-top)); /* notch */
  padding-bottom: calc(clamp(32px, 6vh, 96px) + env(safe-area-inset-bottom));
}

/* Tipograf√≠as que escalan con el ancho de pantalla */
header.hero .hero-title{
  font-size: clamp(2rem, 8.5vw, 3.6rem);   /* m√°s grande en m√≥vil */
  line-height: 1.1;
}
header.hero .hero-tag{
  font-size: clamp(1rem, 4.2vw, 1.25rem);
}
header.hero .hero-ctas .cta{
  padding: clamp(10px, 2.4vh, 14px) clamp(16px, 4.2vw, 22px);
  font-size: clamp(.95rem, 4.2vw, 1.05rem);
  border-width: 2px;
}

/* Logo del hero un poco m√°s grande en m√≥vil */
@media (max-width: 560px){
  .hero-logo{
    width: 120px; height: 120px;
  }
}

/* Quita salto visual entre hero y contenido en m√≥vil */
@media (max-width: 560px){
  h2.section-title{ margin-top: 14px; }
}

/* Si ten√©s un patr√≥n/textura encima, manten√© contraste en m√≥vil */
header.hero{
  background-blend-mode: multiply, normal, normal;
  /* por si tu capa final es un degradado, subile un toque la opacidad en m√≥vil */
}
@media (max-width: 560px){
  header.hero{
    /* ejemplo: si us√°s linear-gradient(... .25, .45) pasalo a .32, .52 */
    background-image:
      /* 1) tu foto */
      /* url('img/banner-chino.png'), */
      /* 2) tu patr√≥n (seigaiha/papel) */
      url('img/pat-seigaiha.svg'),
      /* 3) degradado m√°s marcado para legibilidad */
      linear-gradient(180deg, rgba(0,0,0,.32), rgba(0,0,0,.52));
    background-position: center;
    background-size: cover, auto, auto;
    background-repeat: no-repeat, repeat, no-repeat;
  }
}

.hero{
  position:relative;
  min-height:56vh;
  background:url('img/hero-maestro-lee.png') center/cover no-repeat; /* pon√© tu foto ac√° */
  display:grid; place-items:center;
  border-bottom:4px solid var(--gold);
}

.hero .overlay{
  position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.45));
}
.hero-content{
  position:relative; z-index:1; text-align:center; color:#fff;
  padding:48px 16px; max-width:900px;
}
.hero-logo{
  width:110px; height:110px; object-fit:contain;
  background:#ffffff; border-radius:50%;
  border:3px solid var(--gold);
  box-shadow:0 8px 30px rgba(0,0,0,.35);
  padding:10px; margin-bottom:16px;
  filter:none; /* mantiene el logo claro */
}
.hero-title{
  margin:0 0 8px;
  font-size:clamp(1.9rem, 5.2vw, 3.2rem);
  letter-spacing:1px; color:var(--gold);
  text-shadow:0 3px 10px rgba(0,0,0,.6);
}
.hero-tag{
  margin:0 0 18px; font-size:clamp(1rem, 2.2vw, 1.25rem);
  opacity:.95; text-shadow:0 2px 8px rgba(0,0,0,.55);
}
.hero-ctas{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }

.cta{
  display:inline-block; padding:12px 18px; font-weight:800; border-radius:999px;
  border:2px solid var(--gold); cursor:pointer; text-decoration:none;
  transition:transform .15s ease, box-shadow .2s ease, background-color .2s ease, color .2s ease;
}
.cta:active{ transform:scale(.98); }
.cta-primary{ background:var(--gold); color:#111827; }
.cta-ghost{ background:transparent; color:#fff; }
.cta-ghost:hover{ background:color-mix(in oklab, var(--gold), transparent 82%); }


/* Logo con fondo blanco en la navbar */
.top .brand-mini .nav-logo{
  width:36px; height:36px;               /* ajust√° si lo quer√©s m√°s grande */
  background:#fff;                        /* fondo blanco */
  border-radius:50%;                      /* disco */
  padding:6px;                            /* aire alrededor del logo */
  border:2px solid var(--gold);           /* borde dorado como el resto */
  box-shadow:0 2px 8px rgba(0,0,0,.25);   /* leve sombra para contraste */
  object-fit:contain;
}


@media (max-width:560px){
  .hero-logo{ width:110px; height:110px; margin-bottom: 6px; }
  .hero-ctas .cta{ padding:10px 18px; }
  .hero-tag{ margin-bottom: 8px; }
}
/* desktop queda como lo ten√©s */
#instagram{
  max-width:1100px;
  margin:56px auto 32px;
  padding:28px 20px 32px;
  background:#fff;
  backdrop-filter: blur(6px);
  border: 1px solid rgba(214,184,106,.35);
  border-radius: 18px;
  box-shadow: 0 12px 34px rgba(0,0,0,.08);
}
#instagram .ig-grid{
  margin-top: 18px;
}

/* --- mobile: estilo feed --- */
@media (max-width: 768px){
  #instagram{
    margin: 32px auto;
    padding: 16px 10px 24px;
  }

  #instagram .ig-grid{
    display: grid;
    grid-template-columns: repeat(3, minmax(90px, 1fr)); /* 3 por fila */
    gap: 10px;
  }

  /* los embeds de IG traen width fijo, lo pisamos */
  #instagram .instagram-media{
    max-width: 100% !important;
    width: 100% !important;
    min-height: 140px;          /* para que no colapse mientras carga */
    margin: 0 !important;
    transform: scale(.95);      /* opcional: un pel√≠n m√°s chica */
    transform-origin: top left;
  }
}

/* si el celu es MUY chico ‚Üí 2 columnas */
@media (max-width: 480px){
  #instagram .ig-grid{
    grid-template-columns: repeat(2, minmax(120px, 1fr));
  }
}

/* SOLO las cartas del men√∫ de comidas */
#grid .card{
  background: rgba(13,14,18,.95);     /* fondo m√°s oscuro */
  border: 2px solid rgba(214,184,106,.4);  /* tu dorado pero m√°s suave */
  backdrop-filter: blur(3px);
}

#grid .card h3{
  color: #fff;
}

#grid .card p{
  color: rgba(233,240,255,.65);
}

#grid .card .price{
  color: #fff;   /* porque tu fondo ya no es claro */
}
#cats,
#grid{
  scroll-margin-top: 90px;   /* ajust√° a gusto: 80, 96, 104... */
}


/* color de las letras de las categor√≠as en el NAV */
.nav-cats .cat-btn{
  color: #fff;                 /* ‚Üê ac√° el color que quieras */
}

/* cuando est√° activa (la que tiene la categor√≠a seleccionada) */
.nav-cats .cat-btn.active{
  color: #f6d68a;              /* doradito */
  background: rgba(246,214,138,.08);
  border-color: rgba(246,214,138,.5);
}
/* --- desktop / normal --- */

.nav-cats .cats{
  display: flex;
  gap: 8px;
  flex-wrap: nowrap;   /* o auto si quer√©s */
  justify-content: flex-start;  /* üëà clave */
}
/* --- mobile --- */


/* contenedor flotante */
/* contenedor flotante */
.lang-fab{
  position: fixed;
  bottom: 20px;     /* ‚Üì ahora abajo */
  left: 14px;       /* ‚Üê ahora a la izquierda */
  right: auto;
  top: auto;        /* üëà MUY importante: anulamos el top */
  display: flex;
  gap: 8px;
  z-index: 110;     /* menos que el nav fijo */
}

/* mobile: si te tapa algo lo sub√≠s un poco */
@media (max-width: 820px){
  .lang-fab{
    bottom: 90px;
    left: 14px;
  }
}

/* bot√≥n base */
.langfab{
  background: rgba(8,11,16,.95);
  color: #fff;
  border: 1px solid rgba(246,214,138,.45);
  border-radius: 999px;
  padding: 6px 12px 6px;
  font-size: .75rem;
  font-weight: 600;
  cursor: pointer;
  backdrop-filter: blur(6px);
  transition: transform .12s ease, background .12s ease;
}
.langfab:hover{
  transform: translateY(-2px);
}

/* el no seleccionado */
.langfab.ghost{
  background: rgba(8,11,16,.25);
  border: 1px solid rgba(246,214,138,.15);
  color: #fff;
}

/* mobile: bajar un poquito para no tapar el nav */

.langfab.active{
  background: rgba(246,214,138,1);
  color: #0b0c0f;
  border-color: rgba(246,214,138,1);
}


html, body{
  overflow-x: hidden;
}
/* que el wrap del nav permita otra fila */
nav.top .wrap{
  display: block;
  max-width: 1100px;
  margin: 0 auto;
  padding: 6px 0 4px;
  overflow: visible;
}

nav.top .nav-cats{
  width: 100%;
}
nav.top #cats-bottom{
  display: flex;
  flex-wrap: nowrap;
  gap: 10px;
  overflow-x: auto;                 /* si no entran, scrollea */
  -webkit-overflow-scrolling: touch;
  padding: 6px 14px 10px;
  scrollbar-width: none;
}
nav.top #cats-bottom::-webkit-scrollbar{
  display:none;
}

/* üí• ESPACIADOR AL INICIO */

nav.top #cats-bottom .cat-btn{
  white-space:nowrap;
  flex:0 0 auto;
}
/* el logo va primero */
nav.top .wrap .brand-mini{
  order: 1;
}

/* las categor√≠as del nav van ABAJO y ocupan todo el ancho */
nav.top .wrap #cats{
  order: 2;
  width: 100%;
  display: flex;
  gap: 10px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  padding-bottom: 6px;
}
nav.top .wrap #cats::-webkit-scrollbar{
  display: none;
}

/* que los chips no se rompan */
nav.top .wrap #cats .cat-btn{
  white-space: nowrap;
  flex: 0 0 auto;
}

/* el nav NO debe recortar el contenido */


/* ===== Toolbar filtros (mobile-first) ===== */
.toolbar{
  margin: 8px 0 14px;
  padding: 10px;
  background: rgba(13,14,18,.92);
  border: 1px solid rgba(214,184,106,.30);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  color: #fff;
  -webkit-tap-highlight-color: transparent;
  /* opcional pegajosa en mobile:
  position: sticky; top: 58px; z-index: 90; backdrop-filter: blur(8px);
  */
}

/* FILAS */
.toolbar .row1{ display:flex; gap:8px; }
.toolbar .row2{
  margin-top: 8px;
  display:grid; gap:8px;
  grid-template-columns: 1fr 1fr;              /* 2 columnas en m√≥vil */
}

/* CAMPOS */
.toolbar input[type="search"],
.toolbar input[type="number"],
.toolbar select{
  width: 100%;
  height: 42px;                                 /* dedo-friendly */
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(214,184,106,.28);
  background: #0b0c10;
  color: #fff;
  outline: none;
  font-size: 16px;                               /* evita zoom en iOS */
}

/* bloques de campo */
.toolbar .fi{ display:flex; flex-direction:column; gap:4px; min-width: 0; }
.toolbar .fi span{ font-size:.78rem; opacity:.82 }

/* checkbox compacto */
.toolbar .chk{
  display:flex; align-items:center; gap:8px; padding:8px 10px;
  border:1px dashed rgba(214,184,106,.22); border-radius:10px;
  background: rgba(246,214,138,.06);
}
.toolbar .chk input{ transform: scale(1.05); }

/* √≠tems num√©ricos sin flechas */
.toolbar input[type="number"]::-webkit-outer-spin-button,
.toolbar input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }
.toolbar input[type="number"]{ -moz-appearance: textfield; }

/* selector visual (‚òÖ, $‚Üë, $‚Üì) */
#sort{ width: 68px; text-align:center; font-weight:700; letter-spacing:.2px; }

/* accesibilidad: texto solo para lectores */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* ===== Breakpoints ===== */

/* pantallas medianas: m√°s aire y grilla fluida */
@media (min-width: 480px){
  .toolbar{ padding: 12px; }
  .toolbar .row2{ grid-template-columns: repeat(3, minmax(0,1fr)); }
  #sort{ width: 80px; }
}

/* desktop: vuelve a flex y sube densidad */
@media (min-width: 680px){
  .toolbar{ border-width: 2px; }
  .toolbar .row1{ align-items:center }
  .toolbar .row2{
    margin-top: 10px;
    display:flex; flex-wrap:wrap; gap:10px; align-items:center;
  }
  .toolbar .row1 input[type="search"]{ font-size: 1rem; }
  #sort{ width: 88px; }
}

  </style>
  
</head>
<body>
  <header class="hero">
    <div class="overlay"></div>
    <div class="hero-content">
      <img class="hero-logo" src="img/maestro-lee-logo.png" alt="Maestro Lee" />
      <h1 class="hero-title">Chinese food with Venezuelan flavor</h1>
      <p class="hero-tag"> ¬∑ Homemade ¬∑ </p>
      <div class="hero-ctas">
        <a href="#cats" class="cta cta-primary">Menu</a>
      </div>
    </div>
  </header>
  
  
<!-- NAV -->
<nav class="top">
  <div class="wrap">


    <!-- üëá NUEVO: contenedor para las categor√≠as en el navbar -->
    <div class="nav-cats">
       <div class="brand-mini">
        <img class="nav-logo" src="img/maestro-lee-logo.png" alt="Maestro Lee" />
      </div>
      <div id="cats-bottom" class="cats"></div>
    </div>
  </div>
</nav>

<main>
  <h2 class="section-title" style="color: #ffffff; ">Elige tu categor√≠a</h2>
  <div id="cats" class="cats"></div>
  <!-- üîé Toolbar de b√∫squeda / filtros / orden -->
<div id="toolbar" class="toolbar">
  <div class="row1">
    <input id="q" type="search" placeholder="Search by name or description‚Ä¶" aria-label="Buscar">
  </div>

 

  <label class="fi">
    <span class="sr-only">Sort</span>
    <select id="sort" aria-label="Sort">
      <!-- <option value="relevance"  title="Relevancia">‚òÖ</option> -->
      <option value="price_asc"  title="Price ‚Üë">$‚Üë</option>
      <option value="price_desc" title="Price ‚Üì">$‚Üì</option>
      <!-- Si quer√©s por nombre:
      <option value="name_asc"  title="A‚ÜíZ">A‚ÜíZ</option>
      <option value="name_desc" title="Z‚ÜíA">Z‚ÜíA</option>
      -->
    </select>
  </label>

    <label class="chk">
      <input id="searchAll" type="checkbox">
      <span>All category</span>
    </label>
  </div>
</div>

  <div id="grid" class="grid" aria-live="polite"></div>
</main>


<!-- FAB carrito -->
<button id="fab" class="fab btn-anim btn-glow ripple-wrap" aria-label="Abrir carrito" title="Carrito">
  üõí
  <span id="badge" class="badge">0</span>
</button>

<!-- Drawer carrito -->
<div id="drawer" class="drawer" aria-hidden="true">
  <div class="backdrop" id="backdrop"></div>
  <aside class="panel" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
    <header>
      <h3 id="cartTitle">Tu pedido</h3>
      <!-- + animaciones -->
      <button class="close btn-anim ripple-wrap" id="closeDrawer">Cerrar ‚úï</button>
    </header>

    <div id="items" class="items"></div>

    <div class="sum">
      <div class="row"><span id="lblSubt">Subtotal</span><strong id="subt">$0</strong></div>
      <div class="row"><span id="lblDelivery">Delivery</span><span id="ship">A coordinar</span></div>
      <div class="row" style="font-size:1.15rem"><strong id="lblTotal">Total</strong><strong id="tot">$0</strong></div>
    </div>

    <div class="checkout">
      <!-- + animaciones -->
      <button class="btn-wa btn-anim btn-glow ripple-wrap" id="sendWA" data-i18n="sendWA">
        Enviar pedido por WhatsApp
      </button>
      <button class="btn-clear btn-anim ripple-wrap" id="clear" data-i18n="clear">
        Vaciar carrito
      </button>
    </div>
  </aside>
</div>

  <section id="instagram" style="max-width:1100px;margin:28px auto;padding:0 16px">
    <h2 class="section-title">Instagram</h2>
    <p style="margin:8px 0 20px">
      <a href="https://instagram.com/maes.trolee" target="_blank" rel="noopener"
         style="display:inline-block;padding:8px 12px;border:2px solid var(--gold);
                border-radius:999px;background:var(--panel);text-decoration:none;color:var(--brand);font-weight:700">
        follow @maes.trolee
      </a>
    </p>
  
    <div class="ig-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px">
      <!-- Post/Reel #1 -->
      <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/p/CxTiiAzPr_o/"
        data-instgrm-version="14" style="background:#FFF;border:0;margin:0 auto;max-width:540px;width:100%;">
      </blockquote>
  
      <!-- Post/Reel #2 (opcional) -->
      <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/p/CKmlxruh-nS/"
        data-instgrm-version="14" style="background:#FFF;border:0;margin:0 auto;max-width:540px;width:100%;">
      </blockquote>
  
      <!-- Post/Reel #3 (opcional) -->
      <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/p/CKWaxbwBDu8/"
        data-instgrm-version="14" style="background:#FFF;border:0;margin:0 auto;max-width:540px;width:100%;">
      </blockquote>
    </div>
    
  </section>
  
  <!-- Script oficial de Instagram (una sola vez en la p√°gina) -->
  <script async src="https://www.instagram.com/embed.js"></script>
  
<!-- botones de idioma flotantes -->
<div class="lang-fab" aria-label="Cambiar idioma">
  <button id="btnES" class="langfab">üá™üá∏</button>
  <button id="btnEN" class="langfab ghost">üá∫üá∏</button>
</div>

  <footer>
    <p>&copy; 2025 Maestro Lee. Todos los derechos reservados. <a href="https://instagram.com/maes.trolee" target="_blank" rel="noopener">@maes.trolee</a></p>
  </footer>

  <script>

let lang = window.APP_LANG || 'es'; // o como manejes ES/EN

const itemName = (p) =>
  p.name ?? (lang === 'es' ? p.name_es : p.name_en) ?? '';

const itemDesc = (p) =>
  p.desc ?? (lang === 'es' ? p.desc_es : p.desc_en) ?? '';

const t = (es, en) => (lang === 'es' ? es : en);

const money = (n) =>
  (lang === 'es'
    ? new Intl.NumberFormat('es-AR', { style:'currency', currency:'USD', minimumFractionDigits:0 }).format(n)
    : new Intl.NumberFormat('en-US', { style:'currency', currency:'USD', minimumFractionDigits:0 }).format(n)
  ).replace(/\s/g,''); // quita espacios duros si aparecen

    // ====== i18n ======
// === Helpers I18N (sin chocar con otros 't')
const I18N = (() => {
  let lang = localStorage.getItem('ml_lang') || 'es';
  const ui = {
    es: { choose_category:'Elige tu categor√≠a', your_order:'Tu pedido', close:'Cerrar ‚úï', ship_to_coord:'A coordinar',
          sendWA:'Enviar pedido por WhatsApp', clear:'Vaciar carrito', subtotal:'Subtotal', delivery:'Delivery',
          total:'Total', hello:'Hola Maestro Lee! Quiero hacer un pedido:', cart_empty:'Tu carrito est√° vac√≠o üß∫' },
    en: { choose_category:'Choose your category', your_order:'Your order', close:'Close ‚úï', ship_to_coord:'To coordinate',
          sendWA:'Send order via WhatsApp', clear:'Clear cart', subtotal:'Subtotal', delivery:'Delivery',
          total:'Total', hello:"Hi Maestro Lee! I'd like to order:", cart_empty:'Your cart is empty üß∫' }
  };
  const set   = l => { lang = l; localStorage.setItem('ml_lang', l); };
  const get   = () => lang;
  const name  = p => p.name ?? (lang==='es' ? p.name_es : p.name_en) ?? '';
  const desc  = p => p.desc ?? (lang==='es' ? p.desc_es : p.desc_en) ?? '';
  const text  = k => (ui[lang] && ui[lang][k]) || k;
  const money = n => new Intl.NumberFormat(lang==='es'?'es-AR':'en-US',
                    {style:'currency',currency:'USD',minimumFractionDigits:0}).format(n).replace(/\s/g,'');
  return { set, get, name, desc, text, money, ui };
})();

// ===== Categor√≠as (ES/EN) =====
const CAT_NAMES = {
  es:{entremeses:'Entremeses', entremeses:'Entremeses',sopas:'Sopas',arroz:'Arroz',pollo:'Pollo',res:'Carne de Res',cerdo:'Cerdo',pastas:'Pastas',combos:'Combos',postre:'Postre'},
  en:{entremeses:'Starters', entremeses:'Starters',  sopas:'Soups', arroz:'Rice', pollo:'Chicken',res:'Beef',      cerdo:'Pork', pastas:'Noodles',combos:'Combos',postre:'Dessert'}
};

// ====== Men√∫ real (√∫nico) ‚Äî con descripciones ES/EN ======
const MENU = [
  { id:'entremeses', items:[
    { id:'lumpias-2',
      name_es:'Lumpias (2 piezas)', name_en:'Spring Rolls (2 pcs)',
      desc_es:'Crujientes rollos fritos.', desc_en:'Crispy fried spring rolls.',
      price:4.55, img:'img/entremeses.png' },
    { id:'chop-especial',
      name_es:'Chop Suey Especial', name_en:'Special Chop Suey',
      desc_es:'Cerdo y jam√≥n con repollo, zanahoria, apio y pimientos.', desc_en:'Pork and ham with cabbage, carrot, celery and peppers.',
      price:9.99, img:'img/entremeses.png' },
    { id:'chop-carne',
      name_es:'Chop Suey con Carne', name_en:'Beef Chop Suey',
      desc_es:'Carne salteada con brotes de soja, apio, repollo, zanahoria y pimientos.', desc_en:'Beef stir-fried with bean sprouts, celery, cabbage, carrot and peppers.',
      price:10.99, img:'img/entremeses.png' },
    { id:'chop-camarones',
      name_es:'Chop Suey con Camarones', name_en:'Shrimp Chop Suey',
      desc_es:'Camarones con verduras mixtas (repollo, pimientos y apio).', desc_en:'Shrimp with mixed vegetables (cabbage, peppers, celery).',
      price:11.99, img:'img/entremeses.png' },
    { id:'chop-pollo',
      name_es:'Chop Suey con Pollo', name_en:'Chicken Chop Suey',
      desc_es:'Pollo salteado con verduras crujientes.', desc_en:'Chicken stir-fried with crunchy vegetables.',
      price:9.99, img:'img/entremeses.png' },
    { id:'costillas-agridulces-4',
      name_es:'Costillas Agridulces (4 piezas)', name_en:'Sweet & Sour Ribs (4 pcs)',
      desc_es:'Costillas en salsa agridulce.', desc_en:'Ribs in sweet & sour sauce.',
      price:11.99, img:'img/entremeses.png' },
    { id:'dumpling-8',
      name_es:'Dumpling (8 piezas)', name_en:'Dumplings (8 pcs)',
      desc_es:'Rellenos al vapor.', desc_en:'Steamed stuffed dumplings.',
      price:6.55, img:'img/entremeses.png' },
  ]},

  { id:'sopas', items:[
    { id:'sopa-wonton',
      name_es:'Sopa de Wonton', name_en:'Wonton Soup',
      desc_es:'Caldo de pollo con wonton.', desc_en:'Chicken broth with wontons.',
      price:3.90, img:'img/sopas.png' },
    { id:'sopa-wonton-mee',
      name_es:'Sopa de Wonton Mee', name_en:'Wonton Mee Soup',
      desc_es:'Caldo de pollo con wonton, cerdo y fideos.', desc_en:'Chicken broth with wontons, pork and noodles.',
      price:4.75, img:'img/sopas.png' },
  ]},

  { id:'arroz', items:[
    { id:'arroz-especial',
      name_es:'Arroz Frito Especial', name_en:'Special Fried Rice',
      desc_es:'Arroz con cerdo, pollo, camarones, vegetales, huevo y brotes de soja.', desc_en:'Rice with pork, chicken, shrimp, veggies, egg and bean sprouts.',
      price:9.25, img:'img/arroz.png' },
    { id:'arroz-cerdo',
      name_es:'Arroz Frito con Cerdo', name_en:'Fried Rice with Pork',
      desc_es:'Cerdo, huevo, cebolla verde y brotes de soja.', desc_en:'Pork, egg, scallions and bean sprouts.',
      price:8.99, img:'img/arroz.png' },
    { id:'arroz-pollo',
      name_es:'Arroz Frito con Pollo', name_en:'Fried Rice with Chicken',
      desc_es:'Tiras de pollo, pimientos y cebolla verde.', desc_en:'Chicken strips, peppers and scallions.',
      price:8.99, img:'img/arroz.png' },
    { id:'arroz-carne',
      name_es:'Arroz Frito con Carne', name_en:'Fried Rice with Beef',
      desc_es:'Carne en cubos y vegetales mixtos.', desc_en:'Diced beef and mixed vegetables.',
      price:12.99, img:'img/arroz.png' },
    { id:'arroz-jamon',
      name_es:'Arroz Frito con Jam√≥n', name_en:'Fried Rice with Ham',
      desc_es:'Jam√≥n en cubitos, huevo, vegetales y brotes de soja.', desc_en:'Diced ham, egg, vegetables and bean sprouts.',
      price:8.55, img:'img/arroz.png' },
    { id:'arroz-vegetales',
      name_es:'Arroz Frito con Vegetales', name_en:'Vegetable Fried Rice',
      desc_es:'Vegetales mixtos y cebolla verde.', desc_en:'Mixed vegetables and scallions.',
      price:6.99, img:'img/arroz.png' },
  ]},

  { id:'pollo', items:[
    { id:'pollo-agridulce',
      name_es:'Pollo Agridulce', name_en:'Sweet & Sour Chicken',
      desc_es:'Pollo con salsa agridulce.', desc_en:'Chicken with sweet & sour sauce.',
      price:11.25, img:'img/pollo.png' },
    { id:'pollo-agridulce-pina',
      name_es:'Pollo Agridulce con Pi√±a', name_en:'Sweet & Sour Chicken with Pineapple',
      desc_es:'Con pi√±a en cubos y piment√≥n.', desc_en:'With pineapple chunks and bell pepper.',
      price:11.99, img:'img/pollo.png' },
    { id:'pollo-agridulce-picante',
      name_es:'Pollo Agridulce Picante', name_en:'Spicy Sweet & Sour Chicken',
      desc_es:'Pollo con salsa agridulce picante.', desc_en:'Chicken in spicy sweet & sour sauce.',
      price:11.25, img:'img/pollo.png' },
    { id:'pollo-vegetales',
      name_es:'Pollo con Vegetales', name_en:'Chicken with Vegetables',
      desc_es:'Pollo con vegetales mixtos.', desc_en:'Chicken with mixed vegetables.',
      price:12.99, img:'img/pollo.png' },
    { id:'pollo-brocoli',
      name_es:'Pollo con Br√≥coli', name_en:'Chicken with Broccoli',
      desc_es:'Pollo salteado con br√≥coli.', desc_en:'Stir-fried chicken with broccoli.',
      price:12.99, img:'img/pollo.png' },
    { id:'pollo-champinones',
      name_es:'Pollo con Champi√±ones', name_en:'Chicken with Mushrooms',
      desc_es:'Pollo con champi√±ones.', desc_en:'Chicken with mushrooms.',
      price:12.99, img:'img/pollo.png' },
    { id:'pollo-ostras',
      name_es:'Pollo en Salsa de Ostras', name_en:'Chicken in Oyster Sauce',
      desc_es:'Con cebolla, piment√≥n y cebollino en salsa de ostras.', desc_en:'With onion, bell pepper and chives in oyster sauce.',
      price:11.99, img:'img/pollo.png' },
    { id:'pollo-teriyaki',
      name_es:'Pollo Teriyaki', name_en:'Chicken Teriyaki',
      desc_es:'Pollo con mixto de vegetales y salsa teriyaki.', desc_en:'Chicken with mixed vegetables in teriyaki sauce.',
      price:11.99, img:'img/pollo.png' },
    { id:'pollo-naranja',
      name_es:'Pollo a la Naranja', name_en:'Orange Chicken',
      desc_es:'Pollo en salsa de naranja.', desc_en:'Chicken in orange sauce.',
      price:11.25, img:'img/pollo.png' },
  ]},

  { id:'res', items:[
    { id:'res-vegetales',
      name_es:'Carne de Res con Vegetales', name_en:'Beef with Vegetables',
      desc_es:'Carne con cebolla, pimientos, zanahoria y br√≥coli.', desc_en:'Beef with onion, peppers, carrot and broccoli.',
      price:14.99, img:'img/carne.png' },
    { id:'res-brocoli',
      name_es:'Carne de Res con Br√≥coli', name_en:'Beef with Broccoli',
      desc_es:'Carne salteada con ajo y jengibre.', desc_en:'Beef stir-fried with garlic and ginger.',
      price:14.99, img:'img/carne.png' },
    { id:'res-jengibre-cebollin',
      name_es:'Carne de Res con Jengibre y Ceboll√≠n', name_en:'Beef with Ginger & Chives',
      desc_es:'Carne salteada con ajo, jengibre y cebollino.', desc_en:'Beef stir-fried with garlic, ginger and chives.',
      price:14.99, img:'img/carne.png' },
    { id:'res-ostras',
      name_es:'Carne de Res en Salsa de Ostras', name_en:'Beef in Oyster Sauce',
      desc_es:'Carne con vegetales mixtos en salsa de ostras.', desc_en:'Beef with mixed vegetables in oyster sauce.',
      price:14.99, img:'img/carne.png' },
    { id:'res-champinones',
      name_es:'Carne de Res con Champi√±ones', name_en:'Beef with Mushrooms',
      desc_es:'Carne salteada con cebolla y champi√±ones.', desc_en:'Beef stir-fried with onion and mushrooms.',
      price:14.99, img:'img/carne.png' },
    { id:'res-jojoticos',
      name_es:'Carne de Res con Jojoticos chinos', name_en:'Beef with Baby Corn',
      desc_es:'Carne salteada con cebolla y jojoticos.', desc_en:'Beef stir-fried with onion and baby corn.',
      price:15.44, img:'img/carne.png' },
  ]},

  { id:'cerdo', items:[
    { id:'cerdo-agridulce',
      name_es:'Cerdo Agridulce', name_en:'Sweet & Sour Pork',
      desc_es:'Cerdo con salsa agridulce.', desc_en:'Pork in sweet & sour sauce.',
      price:11.25, img:'img/cerdo.png' },
    { id:'cerdo-vegetales',
      name_es:'Cerdo con Vegetales', name_en:'Pork with Vegetables',
      desc_es:'Cerdo con vegetales mixtos.', desc_en:'Pork with mixed vegetables.',
      price:11.99, img:'img/cerdo.png' },
    { id:'cerdo-jengibre-cebollin',
      name_es:'Cerdo Jengibre y Ceboll√≠n', name_en:'Pork with Ginger & Chives',
      desc_es:'Cerdo salteado con ajo, jengibre y cebollino.', desc_en:'Pork stir-fried with garlic, ginger and chives.',
      price:11.99, img:'img/cerdo.png' },
  ]},

  { id:'pastas', items:[
    { id:'pasta-carne',
      name_es:'Pasta con Carne', name_en:'Noodles with Beef',
      desc_es:'Fideos salteados con tiras de carne y vegetales.', desc_en:'Stir-fried noodles with beef and vegetables.',
      price:11.99, img:'img/pastas.png' },
    { id:'pasta-cerdo',
      name_es:'Pasta con Cerdo', name_en:'Noodles with Pork',
      desc_es:'Fideos con lonjas de cerdo y verduras crujientes.', desc_en:'Noodles with pork and crunchy vegetables.',
      price:9.99, img:'img/pastas.png' },
    { id:'pasta-pollo',
      name_es:'Pasta con Pollo', name_en:'Noodles with Chicken',
      desc_es:'Fideos con pollo y verduras crujientes.', desc_en:'Noodles with chicken and crunchy vegetables.',
      price:9.99, img:'img/pastas.png' },
    { id:'pasta-vegetales',
      name_es:'Pasta con Vegetales', name_en:'Vegetable Noodles',
      desc_es:'Fideos salteados con vegetales variados.', desc_en:'Stir-fried noodles with assorted vegetables.',
      price:9.00, img:'img/pastas.png' },
    { id:'pasta-especial',
      name_es:'Pasta Especial', name_en:'Special Noodles',
      desc_es:'Fideos con camarones, pollo, jam√≥n y vegetales.', desc_en:'Noodles with shrimp, chicken, ham and vegetables.',
      price:10.99, img:'img/pastas.png' },
  ]},

  { id:'combos', items:[
    { id:'combo-veg-agridulce-lumpia',
      name_es:'Arroz frito con vegetales + Pollo agridulce + Lumpia', name_en:'Veg fried rice + Sweet & sour chicken + Spring roll',
      desc_es:'Combo individual.', desc_en:'Single combo.',
      price:9.99, img:'img/combos.png' },
    { id:'combo-especial-res-lumpia',
      name_es:'Arroz frito especial + Carne con br√≥coli + Lumpia', name_en:'Special fried rice + Beef & broccoli + Spring roll',
      desc_es:'Combo individual.', desc_en:'Single combo.',
      price:11.99, img:'img/combos.png' },
    { id:'combo-especial-cerdo-o-pollo',
      name_es:'Arroz frito especial + Cerdo agridulce o Pollo con vegetales', name_en:'Special fried rice + Sweet & sour pork or Chicken & veggies',
      desc_es:'Eleg√≠ una prote√≠na.', desc_en:'Choose one protein.',
      price:10.99, img:'img/combos.png' },
    { id:'combo-arroz-costillas-chopsuey',
      name_es:'Arroz frito + Costillas + Chop Suey', name_en:'Fried rice + Ribs + Chop suey',
      desc_es:'Combo individual.', desc_en:'Single combo.',
      price:9.99, img:'img/combos.png' },
    { id:'combo-fideos-carnes-lumpia-costilla',
      name_es:'Fideos (carne/pollo/cerdo) + Lumpia + Costilla', name_en:'Noodles (beef/chicken/pork) + Spring roll + Rib',
      desc_es:'Eleg√≠ tu prote√≠na.', desc_en:'Choose your protein.',
      price:11.99, img:'img/combos.png' },
    { id:'pan',
      name_es:'Pan', name_en:'Bread',
      desc_es:'Pan.', desc_en:'Bread.',
      price:1.00, img:'img/combos.png' },
  ]},

  { id:'postre', items:[
    { id:'tres-leches',
      name_es:'Tres Leches', name_en:'Three-Milk Cake',
      desc_es:'Cl√°sico postre casero.', desc_en:'Classic milk-soaked cake.',
      price:7.00, img:'img/postres.png' },
    { id:'quesillo',
      name_es:'Quesillo', name_en:'Flan',
      desc_es:'Flan venezolano.', desc_en:'Venezuelan flan.',
      price:5.00, img:'img/postres.png' },
  ]},
];

// ==== Helpers para usar seg√∫n idioma activo ====



   // ===== Estado =====
const state = {
  cat: (typeof MENU!=='undefined' && MENU.length ? MENU[0].id : null),
  cart: new Map(),
  get total(){ let s=0; for(const {item,qty} of this.cart.values()) s += item.price*qty; return s; },
  fmt(n){ return I18N.money(n); },
  get lang(){ return I18N.get(); }, set lang(v){ I18N.set(v); }
};

// ===== Refs DOM =====
const catsEl = document.getElementById('cats-bottom');
const gridEl = document.getElementById('grid');
const badgeEl = document.getElementById('badge');
const drawer = document.getElementById('drawer');
const backdrop = document.getElementById('backdrop');
const fab = document.getElementById('fab');
const closeDrawer = document.getElementById('closeDrawer');
const itemsEl = document.getElementById('items');
const subtEl = document.getElementById('subt');
const totEl = document.getElementById('tot');
const btnES = document.getElementById('btnES');
const btnEN = document.getElementById('btnEN');
const stitle = document.querySelector('.section-title');
const cartTitle = document.getElementById('cartTitle');
const shipLbl = document.getElementById('ship');
const lblSubt = document.getElementById('lblSubt');
const lblDelivery = document.getElementById('lblDelivery');
const lblTotal = document.getElementById('lblTotal');
const waBtn = document.getElementById('sendWA');
const clearBtn = document.getElementById('clear');

// ===== Persistencia =====
const STORAGE_KEY='ml_cart_v1';
function saveCart(){
  const data=[...state.cart.values()].map(r=>({id:r.item.id,qty:r.qty}));
  try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }catch{}
}
function loadCart(){
  try{
    const raw=localStorage.getItem(STORAGE_KEY); if(!raw) return;
    const arr=JSON.parse(raw)||[]; arr.forEach(({id,qty})=>{
      const item = MENU.flatMap(c=>c.items).find(x=>x.id===id);
      if(item) state.cart.set(id,{item,qty:Math.max(1,qty|0)});
    });
  }catch{}
}

// ===== Render =====
function renderCats(){
  if (!catsEl) return;

  catsEl.innerHTML = MENU.map(c => `
    <button class="cat-btn pill-anim btn-anim ripple-wrap ${c.id===state.cat?'active':''}" data-cat="${c.id}">
      ${CAT_NAMES[I18N.get()][c.id]}
    </button>`).join('');

  // üëá ESTA l√≠nea es la que te estaba faltando
  catsEl.scrollLeft = 0;   // üî• vuelve a mostrar "Entremeses" siempre

  catsEl.querySelectorAll('button').forEach(b=>{
    b.onclick = () => {
      state.cat = b.dataset.cat;
      renderCats();
      renderGrid();
      // si no quer√©s que se mueva la p√°gina, no pongas scroll vertical ac√°
    };
  });
}

function resetCatsScroll(){
    if (!catsBar) return;
    catsBar.scrollLeft = 0;
  }

  // cuando carga la p√°gina
  window.addEventListener('load', resetCatsScroll);
  // cuando cambie el tama√±o (como cuando pas√°s de desktop a mobile en devtools)
  window.addEventListener('resize', resetCatsScroll);
  // y por si tu renderCats tarda un poquito
  setTimeout(resetCatsScroll, 200);
  function renderGrid(){
  const gridEl = document.getElementById('grid');
  if (!gridEl) return;

  // ===== Estado defensivo =====
  const lang = (typeof I18N !== 'undefined' && I18N.get) ? I18N.get() : 'es';
  window.state = window.state || {};
  state.cat = state.cat || (Array.isArray(MENU) && MENU[0] ? MENU[0].id : null);
  state.filters = state.filters || { q:'', pmin:null, pmax:null, sort:'relevance', allCats:false };

  // ===== Base de √≠tems (todas o categor√≠a actual) =====
  const baseItems = state.filters.allCats
    ? MENU.flatMap(c => (c.items||[]).map(it => ({...it, __cat:c.id})))
    : ((MENU.find(c => c.id===state.cat)?.items || []).map(it => ({...it, __cat:state.cat})));

  // ===== Filtros (si no ten√©s toolbar, esto no filtra nada) =====
  const q    = (state.filters.q || '').toString().trim().toLowerCase();
  const pmin = state.filters.pmin;
  const pmax = state.filters.pmax;

  const norm = s => (s||'').toString().toLowerCase()
    .normalize('NFD').replace(/\p{Diacritic}/gu,''); // saca acentos

  let items = baseItems.filter(it => {
    if (q){
      const name = norm(I18N.name(it));
      const desc = norm(I18N.desc(it));
      if (!name.includes(norm(q)) && !desc.includes(norm(q))) return false;
    }
    if (pmin != null && it.price < pmin) return false;
    if (pmax != null && it.price > pmax) return false;
    return true;
  });

  // ===== Orden =====
  const relevanceScore = (query, item) => {
    if (!query) return 1;
    const name = norm(I18N.name(item));
    const desc = norm(I18N.desc(item));
    const nq = norm(query);
    let score = 0;
    if (name === nq)        score += 5;
    if (name.startsWith(nq))score += 4;
    if (name.includes(nq))  score += 3;
    if (desc.includes(nq))  score += 1;
    return score;
  };

  switch(state.filters.sort){
    case 'price_asc':  items.sort((a,b)=> a.price - b.price); break;
    case 'price_desc': items.sort((a,b)=> b.price - a.price); break;
    case 'name_asc':   items.sort((a,b)=> I18N.name(a).localeCompare(I18N.name(b))); break;
    case 'name_desc':  items.sort((a,b)=> I18N.name(b).localeCompare(I18N.name(a))); break;
    default:           items.sort((a,b)=> relevanceScore(q,b) - relevanceScore(q,a)); // relevance
  }

  // ===== Render =====
  if (!items.length) {
    const catLabel = state.filters.allCats
      ? (lang==='es' ? 'Todas las categor√≠as' : 'All categories')
      : ((typeof CAT_NAMES!=='undefined' && CAT_NAMES[lang]) ? (CAT_NAMES[lang][state.cat] || '') : '');
    gridEl.innerHTML = `
      <div class="card reveal" style="padding:18px; text-align:center">
        <h3 style="margin:0 0 8px">${catLabel}</h3>
        <p style="color:var(--muted)">${lang==='es' ? 'No hay resultados con los filtros actuales.' : 'No results with current filters.'}</p>
      </div>`;
    if (typeof attachReveal==='function') attachReveal(gridEl);
    return;
  }

  gridEl.innerHTML = items.map(p => {
    const catName = (typeof CAT_NAMES!=='undefined' && CAT_NAMES[lang]) ? (CAT_NAMES[lang][p.__cat] || '') : '';
    return `
      <article class="card card-anim reveal">
        <img src="${p.img}" alt="${I18N.name(p)}">
        <div class="info">
          <h3>${I18N.name(p)}</h3>
          <p class="muted">${catName}</p>
          <div class="row">
            <div class="price">${I18N.money(p.price)}</div>
            <button class="add btn-anim btn-glow ripple-wrap" data-id="${p.id}">
              ${lang==='es' ? 'Agregar' : 'Add'}
            </button>
          </div>
          <p style="margin-top:8px; color:var(--muted)">${I18N.desc(p)}</p>
        </div>
      </article>
    `;
  }).join('');

  // listeners "Agregar"
  gridEl.querySelectorAll('button.add').forEach(b=>{
    b.onclick = () => {
      const it = items.find(x=>x.id===b.dataset.id);
      if (!it) return;
      addToCart(it);
      const txt=b.textContent; b.disabled=true; b.textContent= (lang==='es'?'‚úî Agregado':'‚úî Added');
      setTimeout(()=>{ b.disabled=false; b.textContent=txt; }, 900);
    };
  });

  if (typeof attachReveal==='function') attachReveal(gridEl);
}
function debounce(fn, ms=220){
  let t; 
  return (...args)=>{ clearTimeout(t); t=setTimeout(()=>fn(...args), ms); };
}
// arranca la UI
if (typeof renderCats === 'function') renderCats();
renderGrid();

/* ===== Refs toolbar ===== */
const qEl     = document.getElementById('q');
const pminEl  = document.getElementById('pmin');
const pmaxEl  = document.getElementById('pmax');
const sortEl  = document.getElementById('sort');
const allEl   = document.getElementById('searchAll');

/* ===== Listeners ===== */
qEl?.addEventListener('input', debounce(()=>{
  state.filters.q = qEl.value.trim();
  renderGrid();
}));

pminEl?.addEventListener('input', debounce(()=>{
  const v = pminEl.value === '' ? null : Number(pminEl.value);
  state.filters.pmin = (v!=null && !Number.isNaN(v)) ? v : null;
  renderGrid();
}));

pmaxEl?.addEventListener('input', debounce(()=>{
  const v = pmaxEl.value === '' ? null : Number(pmaxEl.value);
  state.filters.pmax = (v!=null && !Number.isNaN(v)) ? v : null;
  renderGrid();
}));

sortEl?.addEventListener('change', ()=>{
  state.filters.sort = sortEl.value;
  renderGrid();
});

allEl?.addEventListener('change', ()=>{
  state.filters.allCats = !!allEl.checked;
  renderGrid();
});

/* reset al cambiar de categor√≠a (mantengo query pero apago "todas") */
function onCategoryChanged(){
  state.filters.allCats = false;
  allEl && (allEl.checked = false);
  renderGrid();
}

/* Enganchar al click de las categor√≠as del nav: envolver renderCats para avisar */
const _renderCats = renderCats;
renderCats = function(){
  _renderCats();
  // reenganchar los botones para llamar onCategoryChanged
  const catsEl = document.getElementById('cats-bottom');
  catsEl?.querySelectorAll('button[data-cat]').forEach(b=>{
    b.addEventListener('click', onCategoryChanged, { once:false });
  });
};
// ===== Carrito =====
function addToCart(item){
  const had = state.cart.get(item.id);
  state.cart.set(item.id, {item, qty:(had?had.qty:0)+1});
  pulseBadge(); updateCartUI();
}
function changeQty(id,delta){
  const row = state.cart.get(id); if(!row) return;
  row.qty += delta; if(row.qty<=0) state.cart.delete(id); else state.cart.set(id,row);
  updateCartUI();
}
function clearCart(){ state.cart.clear(); updateCartUI(); }

function pulseBadge(){
  const totalQty=[...state.cart.values()].reduce((s,x)=>s+x.qty,0);
  badgeEl.textContent = totalQty>99 ? '99+' : totalQty;
  badgeEl.animate([{transform:'scale(1)'},{transform:'scale(1.2)'},{transform:'scale(1)'}],{duration:250});
}

function updateCartUI(){
  const totalQty=[...state.cart.values()].reduce((s,x)=>s+x.qty,0);
  badgeEl.textContent = totalQty>99 ? '99+' : totalQty;

  itemsEl.innerHTML = '';
  if(totalQty===0){
    itemsEl.innerHTML = `<p style="opacity:.8; padding:10px">${I18N.text('cart_empty')}</p>`;
  }else{
    for(const {item,qty} of state.cart.values()){
      const el=document.createElement('div');
      el.className='ci';
      el.innerHTML=`
        <div>
          <h4>${I18N.name(item)}</h4>
          <div style="opacity:.75">${I18N.money(item.price)} ¬∑ ${item.id}</div>
        </div>
        <div class="qty">
          <button aria-label="Quitar 1">‚àí</button>
          <strong>${qty}</strong>
          <button aria-label="Agregar 1">+</button>
          <button title="Eliminar" style="margin-left:6px">üóëÔ∏è</button>
        </div>`;
      const [btnMinus,btnPlus,btnTrash]=el.querySelectorAll('button');
      btnMinus.onclick=()=>changeQty(item.id,-1);
      btnPlus.onclick =()=>changeQty(item.id,+1);
      btnTrash.onclick=()=>{ state.cart.delete(item.id); updateCartUI(); };
      itemsEl.appendChild(el);
    }
  }
  subtEl.textContent = I18N.money(state.total);
  totEl.textContent  = I18N.money(state.total);
  saveCart();
}

// ===== Drawer =====
function openDrawer(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); }
function closeDrawerFn(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }
fab.onclick=openDrawer; backdrop.onclick=closeDrawerFn; closeDrawer.onclick=closeDrawerFn;
clearBtn.onclick = clearCart;

// ===== WhatsApp =====
function buildWAMessage(){
  if(state.cart.size===0) return I18N.text('hello');
  const lines=[I18N.text('hello'), ''];
  for(const {item,qty} of state.cart.values()){
    lines.push(`‚Ä¢ ${I18N.name(item)} x${qty} ‚Äì ${I18N.money(item.price*qty)}`);
  }
  lines.push('', `${I18N.text('total')}: ${I18N.money(state.total)}`);
  lines.push(`${I18N.text('delivery')}: *${I18N.text('ship_to_coord')}*`);
  lines.push(I18N.get()==='es'?'Nombre y direcci√≥n:':'Name and address:');
  return lines.join('\n');
}
document.getElementById('sendWA').onclick = () => {
  const WA_PHONE = '13215664889';
  const url = `https://wa.me/${WA_PHONE}?text=${encodeURIComponent(buildWAMessage())}`;
  window.open(url,'_blank');
};

// ===== Aplicar textos UI por idioma =====
function applyStaticTexts(){
  stitle && (stitle.textContent = I18N.text('choose_category'));
  cartTitle && (cartTitle.textContent = I18N.text('your_order'));
  closeDrawer && (closeDrawer.textContent = I18N.text('close'));
  shipLbl && (shipLbl.textContent = I18N.text('ship_to_coord'));
  waBtn && (waBtn.textContent = I18N.text('sendWA'));
  clearBtn && (clearBtn.textContent = I18N.text('clear'));
  lblSubt && (lblSubt.textContent = I18N.text('subtotal'));
  lblDelivery && (lblDelivery.textContent = I18N.text('delivery'));
  lblTotal && (lblTotal.textContent = I18N.text('total'));
}

// ===== Listeners de idioma =====
btnES?.addEventListener('click', ()=>{ state.lang='es'; applyStaticTexts(); renderCats(); renderGrid(); });
btnEN?.addEventListener('click', ()=>{ state.lang='en'; applyStaticTexts(); renderCats(); renderGrid(); });

// ===== Init =====
loadCart();
applyStaticTexts();
renderCats();
renderGrid();
updateCartUI();

 
  </script>
  <script>
 document.addEventListener('click', (e)=>{
  const b = e.target.closest('button.add');
  if(!b) return;
  const txt = b.textContent;
  b.disabled = true; b.textContent = '‚úî Agregado';
  setTimeout(()=>{ b.disabled = false; b.textContent = txt; }, 900);
});

    /* Sombra en navbar al scrollear */
    
    
 // Scroll reveal reutilizable para contenido din√°mico
(function () {
  const opts = { threshold: .12, rootMargin: '0px 0px -10% 0px' };
  const io = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.classList.add('is-in');
        io.unobserve(e.target);
      }
    });
  }, opts);

  // funci√≥n global para observar nuevos nodos .reveal
  window.attachReveal = function attachReveal(root = document) {
    root.querySelectorAll('.reveal:not(.is-in)').forEach(el => io.observe(el));
  };

  // primera pasada (lo que ya existe en el DOM)
  attachReveal(document);
})();

    
    /* Ripple en botones con clase .ripple-wrap */
    (function(){
      const makeRipple = (ev) => {
        const btn = ev.currentTarget;
        const rect = btn.getBoundingClientRect();
        const r = document.createElement('span');
        r.className = 'ripple';
        const size = Math.max(rect.width, rect.height);
        r.style.width = r.style.height = size + 'px';
        r.style.left = (ev.clientX - rect.left - size/2) + 'px';
        r.style.top  = (ev.clientY - rect.top  - size/2) + 'px';
        btn.appendChild(r);
        r.addEventListener('animationend', ()=> r.remove());
      };
      document.querySelectorAll('.ripple-wrap').forEach(b=>{
        b.addEventListener('click', makeRipple);
      });
    })();
    
    /* Touch-friendly : activa hover sutil en mobile al tocar */
    document.addEventListener('touchstart', ()=>{}, {passive:true});





    function setLangUI(lang){
  document.getElementById('btnES').classList.toggle('active', lang === 'es');
  document.getElementById('btnEN').classList.toggle('active', lang === 'en');
}

    </script>
<script>
  const nav = document.querySelector('nav.top');
  const navTop = nav.offsetTop;     // posici√≥n original del nav

  window.addEventListener('scroll', () => {
    if (window.scrollY >= navTop) {
      nav.classList.add('is-fixed');
      document.body.classList.add('has-fixed-nav');
    } else {
      nav.classList.remove('is-fixed');
      document.body.classList.remove('has-fixed-nav');
    }
  }, { passive: true });
</script>
<script>
  /* ====== Estado de filtros ====== */
  state.filters = {
    q: '',
    pmin: null,
    pmax: null,
    sort: 'relevance',
    allCats: false
  };
  
  /* ====== Helpers ====== */
  function allItems(){
    return MENU.flatMap(c => c.items.map(it => ({...it, __cat:c.id})));
  }
  function itemsInCurrentCat(){
    const cat = MENU.find(c => c.id === state.cat);
    return cat ? cat.items.map(it => ({...it, __cat:cat.id})) : [];
  }
  function norm(s){ return (s||'').toString().toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu,''); }
  
  /* scoring simple para "relevancia" (match en nombre/desc) */
  function relevanceScore(q, item){
    if(!q) return 1;  // si no hay query, todos empatan
    const name = norm(I18N.name(item));
    const desc = norm(I18N.desc(item));
    const nq = norm(q);
    let score = 0;
    if(name === nq) score += 5;
    if(name.startsWith(nq)) score += 4;
    if(name.includes(nq)) score += 3;
    if(desc.includes(nq)) score += 1;
    return score;
  }
  
  /* aplica filtros + ordenamiento */
  function filterAndSort(items){
    const { q, pmin, pmax, sort } = state.filters;
    const nq = norm(q);
  
    let list = items.filter(it => {
      // texto
      if(nq){
        const match = norm(I18N.name(it)).includes(nq) || norm(I18N.desc(it)).includes(nq);
        if(!match) return false;
      }
      // precios
      if(pmin != null && it.price < pmin) return false;
      if(pmax != null && it.price > pmax) return false;
      return true;
    });
  
    switch(sort){
      case 'price_asc':  list.sort((a,b)=> a.price - b.price); break;
      case 'price_desc': list.sort((a,b)=> b.price - a.price); break;
      case 'name_asc':   list.sort((a,b)=> I18N.name(a).localeCompare(I18N.name(b))); break;
      case 'name_desc':  list.sort((a,b)=> I18N.name(b).localeCompare(I18N.name(a))); break;
      default: { // relevance
        list.sort((a,b)=> relevanceScore(q,b) - relevanceScore(q,a));
      }
    }
    return list;
  }
  
  /* debounce para inputs */
  function debounce(fn, ms=220){
    let t; return (...args)=>{ clearTimeout(t); t=setTimeout(()=>fn(...args), ms); };
  }
  </script>
  
    
</body>
</html>
